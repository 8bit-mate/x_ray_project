<table class="table table-responsive table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">#</th>
      <th scope="col">Preview</th>
      <th scope="col"><%= sort_link(@q, :category_name, "Category", data: {turbo_stream: true}) %></th>
      <th scope="col"><%= sort_link(@q, :number, "Number", data: {turbo_stream: true}) %></th>
      <th scope="col">Tracklist</th>
    </tr>
  </thead>
  <tbody>
    <% records.each_with_index do |record, index| %>
      <tr>
        <th scope="row">
          <%= item_index(index, @pagy) %>
        </th>
        <td>
          <%= link_to image_tag(record.web_images.first.variant(:preview), class: "record-image-preview"), record %>
        </td>
        <td>
          <%= record.category.name %>
        </td>
        <td>
          <%= record.number %>
        </td>
        <td>
          <%= render "shared/tracklist_preview", tracks: record.tracks.order(:number), url_scope: nil %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<%== pagy_bootstrap_nav(@pagy) %>
<%== pagy_info(@pagy) %>
