<div id="<%= dom_id record %>">

  <div id="record-web-images" class="carousel slide">
    <div class="carousel-inner">
      <% image = record.web_images.first %>
      <div class="carousel-item active">
        <%= image_tag(image, class: "img-fit-to-height") %>
      </div>
      <% record.web_images.drop(1).each do |image| %>
      <div class="carousel-item">
        <%= image_tag(image, class: "img-fit-to-height") %>
      </div>
      <% end %>
    </div>
    <% if record.web_images.length > 1 %>
      <button class="carousel-control-prev" type="button" data-bs-target="#record-web-images" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#record-web-images" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
      </button>
    <% end %>
  </div>

  <div class="accordion" id="record-info">
    <div class="accordion-item">
      <h2 class="accordion-header">
        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseOne" aria-expanded="true" aria-controls="panelsStayOpen-collapseOne">
          Main information
        </button>
      </h2>
      <div id="panelsStayOpen-collapseOne" class="accordion-collapse collapse show">
        <div class="accordion-body">
          <table class="table">
            <tbody>
              <tr>
                <th scope="row">
                  Catalog number
                </th>
                <td>
                  <%= record.cat_number %>
                </td>
              </tr>
              <tr>
                <th scope="row">
                  Category
                </th>
                <td>
                  <% category = record.category %>
                  <%= render "shared/tag_display", obj: category, url_scope: nil if category.visible %>
                </td>
              </tr>
              <tr>
                <th scope="row">
                  Label
                </th>
                <td>
                  <% label = record.label %>
                  <%= render "shared/tag_display", obj: label, url_scope: nil if label.visible %>
                </td>
              </tr>
              <tr>
                <th scope="row">
                  Format description
                </th>
                <td>
                  <% tags = record.format_tags.visible %>
                  <%= render "shared/tag_array_display", tags: tags, url_scope: nil %>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div class="accordion-item">
      <h2 class="accordion-header">
        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwo" aria-expanded="false" aria-controls="panelsStayOpen-collapseTwo">
          Track list
        </button>
      </h2>
      <div id="panelsStayOpen-collapseTwo" class="accordion-collapse collapse show">
        <div class="accordion-body">
          <%= render "shared/tracklist", tracks: record.tracks.order(:number), url_scope: nil %>
        </div>
      </div>
    </div>
    <div class="accordion-item">
      <h2 class="accordion-header">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseThree" aria-expanded="false" aria-controls="panelsStayOpen-collapseThree">
          Additional information
        </button>
      </h2>
      <div id="panelsStayOpen-collapseThree" class="accordion-collapse collapse">
        <div class="accordion-body">
          Last update: <%= record.updated_at %>
        </div>
      </div>
    </div>
  </div>
</div>
